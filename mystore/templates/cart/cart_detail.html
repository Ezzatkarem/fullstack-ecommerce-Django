{% extends 'core/base.html' %}

{% block content %}

{% if cart_items %}
<div class="row g-3">
    {% for item in cart_items %}
    <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3">
        <div class="card shadow-sm hover-shadow" style="font-size:0.85rem; transition: transform 0.2s;">
            {% if item.product.image %}
                <img src="{{ item.product.image.url }}" class="card-img-top" style="height:120px; object-fit:cover;">
            {% endif %}
            <div class="card-body p-2">
                <h6 class="card-title mb-1">{{ item.product.name }}</h6>
                <p class="mb-1">Price: ${{ item.product.price }}</p>
                <p class="mb-1">Subtotal: ${{ item.subtotal }}</p>
            </div>
            <div class="card-footer d-flex justify-content-between align-items-center p-2">
                <div class="d-flex gap-1">
                    <a href="{% url 'cart:cart_update' item.id 'decrease' %}" class="btn btn-sm btn-outline-secondary p-1" style="width:28px; height:28px;">-</a>
                    <span class="mx-1">{{ item.quantity }}</span>
                    <a href="{% url 'cart:cart_update' item.id 'increase' %}" class="btn btn-sm btn-outline-secondary p-1" style="width:28px; height:28px;">+</a>
                </div>
                <a href="{% url 'cart:cart_remove' item.id %}" class="btn btn-sm btn-danger">Remove</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="d-flex justify-content-end align-items-center gap-2 mt-3 position-sticky" style="top:0; z-index:1000; background:white; padding:10px;">
    <h5 class="mb-0">Total: ${{ total }}</h5>
    <a href="{% url 'frontpage' %}" class="btn btn-primary btn-sm">Continue Shopping</a>
    <a href="{% url 'accounts:profile' %}" class="btn btn-secondary btn-sm">Go to Profile</a>
</div>

{% else %}
<div class="text-center py-5">
    <h6>Your cart is empty.</h6>
    <a href="{% url 'frontpage' %}" class="btn btn-primary mt-2">Start Shopping</a>
</div>
{% endif %}

{% endblock %}
